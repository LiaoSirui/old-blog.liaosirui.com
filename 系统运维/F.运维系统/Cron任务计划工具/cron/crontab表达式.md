## Cron 表达式

下面是一个简单的 Crontab 文件示例：

```bash
# .---------------- minute
# |  .------------- hour
# |  |  .---------- day of month 
# |  |  |  .------- month 
# |  |  |  |  .---- day of week (Sunday=0 or 7)
# |  |  |  |  |
# *  *  *  *  * user-name  command to be executed 指定Cron作业需要执行的具体命令或脚本路径
  30 04 *  *  *   root     /path/to/daily_backup.sh
```

这个示例中的任务配置表示：在每天 4:30，系统会以 root 用户的身份执行`daily_backup.sh`脚本。

## 字段取值

下表为Cron表达式中五个字段的取值范围和支持的特殊字符。

| **字段名称** | **是否必填** | **可接受的范围**                                             | **特殊字符使用**        |
| ------------ | ------------ | ------------------------------------------------------------ | ----------------------- |
| 分钟         | 是           | `[0, 59]`                                                    | `*`,`-`,`/`             |
| 小时         | 是           | `[0, 23]`                                                    | `*`,`-`,`/`             |
| 日           | 是           | `[1, 31]`                                                    | `*`,`-`,`/`,`?`,`L`,`W` |
| 月           | 是           | `[1, 12]` 或英文月份简称 `[JAN, DEC]`                        | `*`,`-`,`/`             |
| 星期         | 是           | 默认遵循 Unix 的 `[0，6]（0=SUN, 6=SAT）`，但支持 7 作为 SUN 的别名。 | `*`,`-`,`/`,`?`,`L`,`#` |

## 特殊字符含义与示例

| **特殊字符** | **含义**                                   | **示例**                                          |
| ------------ | ------------------------------------------ | ------------------------------------------------- |
| `*`          | 匹配该字段的任意值。                       | `0 * * * * command`每小时的第0分钟执行。          |
| `-`          | 表示范围。                                 | `0 1-3 * * * command`每天的1点到3点每小时执行。   |
| `/`          | 用来指定时间的间隔。                       | `*/15 * * * * command`每15分钟执行一次。          |
| `?`          | 可用于日或星期字段，表示“无特定值”。       | `0 0 2 ? * * command`每月2号执行，星期不指定。    |
| `L`          | 可用于日或星期字段，表示“最后一天”。       | `0 0 L * * command`每月的最后一天执行。           |
| `W`          | 仅用于日字段，表示最接近指定日期的工作日。 | `0 0 15W * * command`最接近每月15号的工作日执行。 |
| `#`          | 用于星期字段，表示“该月的第几个星期几”。   | `0 0 * * 3#2 command`每月的第二个星期三执行。     |

## 实用 Cron 表达式

| **Cron 表达式** | **含义**                       | **适用背景**                                                 |
| --------------- | ------------------------------ | ------------------------------------------------------------ |
| `* * * * *`     | 每分钟执行一次任务。           | 用于测试和验证Cron配置是否正确激活和执行。                   |
| `0 0 * * *`     | 每天00:00执行一次任务。        | 适用于每日重置或备份服务器数据，确保数据安全。               |
| `0 2 * * *`     | 每天2:00执行一次。             |                                                              |
| `0 1 * * *`     | 每天1:00执行一次。             |                                                              |
| `0 6 * * *`     | 每天6:00执行任务。             | 适用于早晨更新数据报表，供团队成员查看最新信息。             |
| `0 12 * * *`    | 每天12:00执行任务。            | 用于企业中执行中午数据同步或发送日常提醒邮件。               |
| `0 18 * * 1-5`  | 周一至周五的18:00执行任务。    | 适合业务结束前的数据备份，确保所有当日数据得到保存。         |
| `0 21 * * *`    | 每天21:00执行任务。            | 适用于商业运营结束后清理系统或备份当日交易数据。             |
| `0 0 1 * *`     | 每月的第一天00:00执行任务。    | 适用于月初自动产生财务、销售或其他业务报告。                 |
| `0 0 1 1,7 *`   | 每年的1月1日和7月1日执行任务。 | 用于执行半年度数据归档或组织结构调整等重要任务。             |
| `15 14 1 * *`   | 每月第一天的14:15执行任务。    | 用于监控和更新IT系统的安全补丁，确保系统安全性。             |
| `0 0 * * 0`     | 每周日00:00执行任务。          | 适用于执行周末数据清理和优化，为新周准备干净的环境。         |
| `0 0 1 1 *`     | 每年1月1日执行任务。           | 适用于年初自动执行重要的年度启动脚本，如系统重置或重要数据归档。 |
| `*/10 * * * *`  | 每10分钟检查一次系统状态。     | 适用于关键系统或服务的持续监控，确保性能和可靠性。           |

## 示例

每个月最后一天执行的表达式如下

```plain
59   23   L    *    *
```

## 参考资料

- <https://crontab.guru/>
